language: node_js
node_js:
  - '10'
#os: osx todo restore safari
install: ./build/npm-install.sh
before_install: if [[ `npm -v` != 6* ]]; then npm i -g npm; fi
script:
  - npm run deploy
after_script:
  - node ./node_modules/coveralls/bin/coveralls.js -v < ./reports/report-lcov/lcov.info
sudo: required
deploy:
  - provider: npm
    skip_cleanup: true
    email: comindware-awesome-bot@comindware.com
    api_key:
      secure: ZQUe9/6n+JAJc5rMeRjXo0kaqOMNqJWCr7PwP/LeM8bCkoLE5qzyeGW7EUoGdHRBauAXRPOQ+OlPmBrLCF0QZaugjVEgelYLSUc4Bx+h3moW2LFyzeD0+seUm+NtLV5RvrDeU/QescWbxpQs6J72x/bN8OaYVz4vf49al70A/2V1LCgr/nGH5dtWZTe+x7Gh0M7wz+yv8a8Cvk4MjVEHXPzpOibkduP2MP7mMCuy4qaOi9RlvbYDFvg0BAcOkuHohYRo0juOqoEdk3Wqp+BJ9g/Oghw9G2vtIv3seuYFHYTMvnLDzB2ZkRwSAsZEtvoA0kSCVqkFVixoq4pm0XWyTFhwBrO7ZExmWJJ5xlAnJsgi3Ape2JqV1vR35YnQhFNPZU3IyhPR8buLjboIz157GMsOy6NsM/jJQAtri7FIgkI9xgfAKay05l1mlqQtXjfsQ4kBnF+ylO0Xbu0tPCPtPdYmrtOZWorntk7/WIxfvj2wY1DTTTaBNlgQ2OKeVWkLhAhx3Q8KXR0YofZXFWoKkXymYY+NZ22hT2w/FgWtRXF8torB206gKds8tIfYH7FBGk40yJu3IWRoz7Ss0o140qUm2dyWc4Ekx9HwFfmUpzCa/vNIHwlWJfBrZF6ADMam/Jk+/npwtyNNU+78GAyXidp3w774A0auHHEPQ+RlXJs=
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
  - provider: script
    script: npm run deploy:pages
    skip_cleanup: true
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
addons:
  firefox: "latest"