language: node_js
node_js:
  - '12'
#os: osx todo restore safari
install: ./build/npm-install.sh
script:
  - npm run deploy
after_script:
  - node ./node_modules/coveralls/bin/coveralls.js < ./reports/lcov.info
sudo: required
deploy:
  - provider: npm
    skip_cleanup: true
    email: comindware-awesome-bot@comindware.com
    api_key:
      secure: Z8P4ULuwSCCDFUTQsNm1URXwhz6FwIQcaRxQBup3HJ8CFlW44QFf+Y7rFTlACA5e/30+amGcM3+r9ylsh/7Hxv7Fmdx9LLJGbO8APaMiKhmSDtb3vmBvrkcHbH/zqBeM4fgXJitkNa722DoBIwlqmBSwZBjtqDCznP6KLKt4nryjRTdd62jDUBP3YA/kUVsb3h64eBFXp9VGNwpzIWxj9mlV0LzTJvdCZ5ksijJmPal+JEaU02Qi8gvbcvlDGBiL8n62UyByT/pqyGj38YUgSKDlNKeT38JIEkhYk+Ianm6psry6KOPQTCXIqrQkdBAB/gsaGAtcKeAbxj6gxFVZ8pDGnB/QnqYSDwINnOQ4UvyFaoxKkmVBEaLHJhaCZJiDONiglIa/TbAW+X81L+B2uzkT31HsIW1JQ1GBcqD6CIaQLMvm7z8ksOkKj9tif/rBhPyhXK32ve/8RNr1kSfc+AxzT737uGSwrvpKVV/DkU3GJsaonmpLtWFeXSlwCTebmhe3ImKAMmzpA0mF/4u2cbOLsKk9e9QJXVQhmVsv6cEjfW/JMfMl/Mg8qGAQe8mnrb+dDDEGpRvC3VbIcU/BdMGMXFWn8Kg14mURvW/h7DK94KIOB25ehKFvQcisoetKq1Ba5ezFC5hWrMJeysijlpLDKGTJ7bgPtyH+QbsCRno=
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
  - provider: script
    script: npm run deploy:pages
    skip_cleanup: true
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
addons:
  firefox: "latest"